/* ============================================
   CLASH OF CLANS STYLE UI THEME
   Premium isometric game interface
   ============================================ */

/* Import premium font */
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;900&display=swap');

:root {
    /* CoC Color Palette */
    --coc-gold: #f4d03f;
    --coc-gold-dark: #d4a017;
    --coc-gold-light: #fff5cc;
    --coc-blue: #3498db;
    --coc-blue-dark: #2471a3;
    --coc-red: #c0392b;
    --coc-red-light: #e74c3c;
    --coc-green: #27ae60;
    --coc-green-dark: #1e8449;
    --coc-purple: #8e44ad;
    --coc-orange: #e67e22;
    --coc-brown: #8b4513;
    --coc-brown-light: #a0522d;

    /* Panel colors */
    --panel-bg: linear-gradient(180deg, #3a2a1a 0%, #2a1a0a 100%);
    --panel-border: #c4a574;
    --panel-border-dark: #8b7355;
    --panel-inner: #1a0a00;

    /* Text */
    --text-primary: #fff5e6;
    --text-secondary: #c4a574;
    --text-shadow: 2px 2px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;
}

.app-container {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: #1a2a1a;
}



#game-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
}

/* ============================================
   GAME TOOLTIP - Above Pixelation Layer
   ============================================ */

.game-tooltip {
    position: fixed;
    z-index: 5;
    background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
    border: 3px solid #c4a574;
    border-bottom-color: #8b7355;
    border-right-color: #9b8365;
    border-radius: 4px;
    padding: 10px 16px;
    pointer-events: none;
    font-family: 'Outfit', sans-serif;
    box-shadow:
        0 4px 0 #1a1a1a,
        0 6px 12px rgba(0, 0, 0, 0.7),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    min-width: 120px;
    text-align: center;
    animation: tooltipFadeIn 0.15s ease-out;
}

@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.game-tooltip-title {
    font-size: 14px;
    font-weight: 900;
    color: #ffcc00;
    margin-bottom: 4px;
    text-shadow: 2px 2px 0 #000, -1px -1px 0 #000;
    letter-spacing: 0.5px;
}

.game-tooltip-desc {
    font-size: 11px;
    color: #fff5e6;
    text-shadow: 1px 1px 0 #000;
}



/* ============================================
   HUD LAYOUT
   ============================================ */

.hud {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 1.5rem;
    box-sizing: border-box;
    font-family: 'Outfit', sans-serif;
    color: var(--text-primary);
    z-index: 10;
    opacity: 1;
    transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    animation: uiInitialFade 1s ease-out;
}

@keyframes uiInitialFade {
    0% {
        opacity: 0;
        transform: scale(0.95);
    }

    100% {
        opacity: 1;
        transform: scale(1);
    }
}


.hud-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    width: 100%;
}

/* ============================================
   TITLE BAR - CoC Style Banner
   ============================================ */

.title {
    margin: 0;
    font-size: 2rem;
    font-weight: 900;
    background: var(--panel-bg);
    color: var(--coc-gold);
    padding: 0.6rem 1.5rem;
    border: 4px solid var(--panel-border);
    border-radius: 8px;
    box-shadow:
        0 4px 0 var(--panel-border-dark),
        0 6px 12px rgba(0, 0, 0, 0.5),
        inset 0 2px 0 rgba(255, 255, 255, 0.1);
    text-shadow: var(--text-shadow);
    letter-spacing: 1px;
}

/* ============================================
   RESOURCES - Golden Bars
   ============================================ */

.resources {
    display: flex;
    gap: 0.8rem;
    pointer-events: auto;
}

.res-item {
    background: var(--panel-bg);
    padding: 0.5rem 1.2rem;
    border: 3px solid var(--panel-border);
    border-radius: 20px;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-weight: 700;
    font-size: 1.1rem;
    box-shadow:
        0 3px 0 var(--panel-border-dark),
        0 4px 8px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    text-shadow: 1px 1px 0 #000;
}

.settings-btn {
    background: var(--panel-bg);
    border: 3px solid var(--panel-border);
    border-radius: 50%;
    width: 45px;
    height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    pointer-events: auto;
    box-shadow:
        0 3px 0 var(--panel-border-dark),
        0 4px 8px rgba(0, 0, 0, 0.4);
    transition: all 0.2s ease;
}

.settings-btn:hover {
    transform: rotate(45deg) scale(1.1);
}

.settings-btn .btn-icon {
    font-size: 1.5rem;
}

/* Settings Modal Specifics */
.settings-modal {
    max-width: 400px;
}

.settings-body {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    padding: 1rem 0;
}

.setting-row {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}

.setting-row label {
    font-size: 0.75rem;
    font-weight: 900;
    color: var(--text-secondary);
    letter-spacing: 1px;
}

.toggle-btn {
    width: 100%;
    padding: 1rem;
    font-size: 1.2rem;
    background: linear-gradient(180deg, #444 0%, #222 100%);
    border-color: #555;
    color: #666;
}

.toggle-btn.active {
    background: linear-gradient(180deg, var(--coc-green) 0%, var(--coc-green-dark) 100%);
    border-color: #8fbc8f;
    color: white;
}

.slider-container {
    display: flex;
    align-items: center;
    gap: 1rem;
    background: rgba(0, 0, 0, 0.3);
    padding: 0.8rem 1.2rem;
    border-radius: 12px;
    border: 2px solid rgba(255, 255, 255, 0.05);
}

.slider-container input[type="range"] {
    flex: 1;
    accent-color: var(--coc-gold);
}

.val-text {
    font-weight: 900;
    min-width: 40px;
    color: var(--coc-gold);
}

/* ============================================
   BOTTOM PANEL - ACTION BUTTONS
   ============================================ */

.build-menu {
    background: var(--panel-bg);
    border: 4px solid var(--panel-border);
    border-radius: 12px;
    pointer-events: auto;
    align-self: center;
    padding: 1rem 1.5rem;
    box-shadow:
        0 4px 0 var(--panel-border-dark),
        0 8px 20px rgba(0, 0, 0, 0.5),
        inset 0 2px 0 rgba(255, 255, 255, 0.1);
}

.menu-inner {
    display: flex;
    gap: 1.5rem;
    align-items: stretch;
}

.menu-section {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
}

.section-label {
    font-size: 0.65rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    font-weight: 700;
    color: var(--text-secondary);
    text-shadow: 1px 1px 0 #000;
}

.btn-group {
    display: flex;
    gap: 0.6rem;
    align-items: center;
}

.menu-divider {
    width: 3px;
    background: linear-gradient(180deg, transparent, var(--panel-border-dark), transparent);
    border-radius: 2px;
    align-self: stretch;
}

/* ============================================
   BUTTONS - CoC Style 3D Buttons
   ============================================ */

button {
    background: linear-gradient(180deg, #5a5a5a 0%, #3a3a3a 50%, #2a2a2a 100%);
    border: 3px solid #6a6a6a;
    border-bottom-color: #2a2a2a;
    border-right-color: #3a3a3a;
    color: white;
    padding: 0.6rem 1rem;
    cursor: pointer;
    font-weight: 700;
    text-transform: uppercase;
    font-family: inherit;
    font-size: 0.8rem;
    border-radius: 8px;
    box-shadow:
        0 4px 0 #1a1a1a,
        0 6px 8px rgba(0, 0, 0, 0.4);
    text-shadow: 1px 1px 0 #000;
    transition: all 0.1s ease;
    position: relative;
}

button:hover {
    background: linear-gradient(180deg, #7a7a7a 0%, #5a5a5a 50%, #4a4a4a 100%);
    transform: translateY(-2px);
    box-shadow:
        0 6px 0 #1a1a1a,
        0 8px 12px rgba(0, 0, 0, 0.5);
}

button:active {
    transform: translateY(2px);
    box-shadow:
        0 2px 0 #1a1a1a,
        0 3px 4px rgba(0, 0, 0, 0.3);
}

button:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    filter: grayscale(0.8);
    transform: none;
}

/* Build Button - Golden Theme */
.build-btn {
    background: linear-gradient(180deg, var(--coc-gold) 0%, var(--coc-gold-dark) 50%, #b8860b 100%);
    border-color: var(--coc-gold-light);
    border-bottom-color: #8b6914;
    color: #2a1a00;
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3);
}

.build-btn:hover {
    background: linear-gradient(180deg, #ffe066 0%, var(--coc-gold) 50%, var(--coc-gold-dark) 100%);
}

.build-btn.active {
    background: linear-gradient(180deg, #fff 0%, var(--coc-gold-light) 50%, var(--coc-gold) 100%);
    box-shadow:
        0 4px 0 #8b6914,
        0 0 15px rgba(244, 208, 63, 0.5);
}

/* Action Buttons */
.main-actions {
    display: flex;
    gap: 0.5rem;
    width: 100%;
    justify-content: center;
}

.action-btn {
    font-size: 0.9rem;
    padding: 0.8rem 1rem;
    flex: 1;
    min-width: 80px;
    height: 85px;
    /* Fixed height for all action buttons to match premium look */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 4px;
}

.btn-icon {
    font-size: 1.8rem;
    filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.5));
}

.btn-label {
    font-size: 0.85rem;
    font-weight: 900;
    letter-spacing: 0.5px;
}

.action-btn.enemy {
    background: linear-gradient(180deg, var(--coc-red-light) 0%, var(--coc-red) 50%, #922b21 100%);
    border-color: #f1948a;
    border-bottom-color: #641e16;
    height: 100%;
    /* Force fill container */
}

.action-btn.enemy.disabled {
    filter: grayscale(1) opacity(0.5);
    cursor: not-allowed;
    pointer-events: none;
}

.action-btn.enemy:hover:not(.disabled) {
    background: linear-gradient(180deg, #ff6b5b 0%, var(--coc-red-light) 50%, var(--coc-red) 100%);
}

.action-btn.train {
    background: linear-gradient(180deg, #f39c12 0%, var(--coc-orange) 50%, #b9770e 100%);
    border-color: #fad7a0;
    border-bottom-color: #935116;
}

.action-btn.train:hover {
    background: linear-gradient(180deg, #f5b041 0%, #f39c12 50%, var(--coc-orange) 100%);
}

.action-btn.build {
    background: linear-gradient(180deg, var(--coc-gold) 0%, var(--coc-gold-dark) 50%, #b8860b 100%);
    border-color: var(--coc-gold-light);
    border-bottom-color: #8b6914;
    color: #2a1a00;
}

.action-btn.build:hover {
    background: linear-gradient(180deg, #ffe066 0%, var(--coc-gold) 50%, var(--coc-gold-dark) 100%);
}

.action-btn.next-map {
    background: linear-gradient(180deg, #a0522d 0%, #8b4513 50%, #5d2e0a 100%);
    border-color: #c4a574;
    border-bottom-color: #311b05;
}

.action-btn.next-map:hover {
    background: linear-gradient(180deg, #5dade2 0%, var(--coc-blue) 50%, var(--coc-blue-dark) 100%);
}

.action-btn.home {
    background: linear-gradient(180deg, #5a5a5a 0%, #3a3a3a 50%, #2a2a2a 100%);
    border-color: #6a6a6a;
    border-bottom-color: #2a2a2a;
}

.action-btn.home:hover {
    background: linear-gradient(180deg, #7a7a7a 0%, #5a5a5a 50%, #4a4a4a 100%);
}

/* Raid Group with Challenge Button */
.raid-group {
    position: relative;
    flex: 1;
    display: flex;
    min-height: 80px;
    /* Fix height mismatch */
    align-items: stretch;
}

.challenge-btn-mini {
    position: absolute;
    bottom: 110%;
    left: 0;
    width: 100%;
    opacity: 0;
    transform: translateY(10px);
    pointer-events: none;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    background: linear-gradient(180deg, var(--coc-blue) 0%, var(--coc-blue-dark) 100%);
    font-size: 0.5rem !important;
    padding: 0.25rem 0.1rem !important;
    white-space: nowrap;
    z-index: 100;
    border-radius: 6px;
}

.raid-group:hover .challenge-btn-mini {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

.capacity-text {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--text-primary);
    text-shadow: var(--text-shadow);
    letter-spacing: 1px;
}

/* ============================================
   MODAL - CoC Style Popup
   ============================================ */

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    pointer-events: auto;
    backdrop-filter: blur(4px);
    opacity: 1;
    transition: opacity 0.4s ease, backdrop-filter 0.4s ease;
}


.training-modal {
    background: var(--panel-bg);
    border: 6px solid var(--panel-border);
    border-radius: 16px;
    width: 800px;
    max-width: 90vw;
    max-height: 75vh;
    padding: 0;
    box-shadow:
        0 6px 0 var(--panel-border-dark),
        0 12px 40px rgba(0, 0, 0, 0.7),
        inset 0 2px 0 rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(180deg, #4a3a2a, #3a2a1a);
    border-bottom: 4px solid var(--panel-border-dark);
    padding: 1rem 1.5rem;
}

.modal-body {
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--panel-border) var(--panel-inner);
}

.modal-body::-webkit-scrollbar,
.troop-list::-webkit-scrollbar {
    width: 8px;
}

.modal-body::-webkit-scrollbar-track,
.troop-list::-webkit-scrollbar-track {
    background: var(--panel-inner);
    border-radius: 4px;
}

.modal-body::-webkit-scrollbar-thumb,
.troop-list::-webkit-scrollbar-thumb {
    background: var(--panel-border);
    border-radius: 4px;
}

.modal-body::-webkit-scrollbar-thumb:hover,
.troop-list::-webkit-scrollbar-thumb:hover {
    background: var(--coc-gold);
}

.modal-header h2 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 900;
    color: white;
    text-shadow: 0 2px 2px rgba(0, 0, 0, 0.5);
    letter-spacing: 0.5px;
}

.close-btn {
    background: #000;
    border: 2px solid #555;
    color: white;
    font-size: 1.2rem;
    padding: 0;
    padding-bottom: 2px;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    transition: all 0.2s ease;
}

.close-btn:hover {
    background: #333;
    transform: scale(1.1);
}

.housing-status {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--text-secondary);
    text-shadow: 1px 1px 0 #000;
}

.housing-status span.full {
    color: var(--coc-red-light);
    animation: flash 0.5s infinite alternate;
}

/* ============================================
   TROOP/BUILDING LIST
   ============================================ */

.troop-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 12px;
    padding: 10px;
}

.troop-grid-item {
    background: linear-gradient(180deg, #3a3020 0%, #2a2015 100%);
    border: 3px solid var(--panel-border-dark);
    border-radius: 12px;
    padding: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.troop-grid-item:hover:not(.disabled) {
    border-color: var(--coc-gold);
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(244, 208, 63, 0.2);
}

.troop-grid-item.disabled {
    filter: grayscale(1) opacity(0.6);
    cursor: not-allowed;
}

.troop-grid-item:active:not(.disabled) {
    transform: scale(0.95);
    filter: brightness(0.9);
}

.troop-grid-item .count-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: var(--coc-blue);
    color: white;
    font-size: 0.8rem;
    padding: 2px 8px;
    border-radius: 6px;
    font-weight: 900;
    box-shadow: 0 2px 0 rgba(0, 0, 0, 0.4);
    z-index: 2;
}

.troop-grid-item .cost-badge {
    background: rgba(0, 0, 0, 0.5);
    border-radius: 6px;
    padding: 2px 6px;
    font-size: 0.65rem;
    font-weight: 700;
    color: #ffd700;
    display: flex;
    align-items: center;
    gap: 3px;
}

.army-queue {
    display: flex;
    gap: 10px;
    background: var(--panel-inner);
    padding: 10px 15px;
    border-radius: 12px;
    margin-bottom: 20px;
    border: 3px solid var(--panel-border-dark);
    min-height: 80px;
    overflow-x: auto;
    align-items: center;
}

.army-queue .hint {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.4);
    font-style: italic;
    text-align: center;
}

.queue-label {
    font-size: 0.7rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    font-weight: 900;
    margin-bottom: 8px;
    display: block;
}

.queue-item {
    position: relative;
    flex-shrink: 0;
    width: 60px;
    height: 60px;
    background: #4a3a2a;
    border: 2px solid var(--panel-border);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.queue-item .remove-btn {
    position: absolute;
    top: -8px;
    left: -8px;
    background: #000;
    color: #fff;
    border: 1.5px solid #555;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    padding-bottom: 2px;
    line-height: 1;
    font-size: 14px;
    font-weight: 900;
    cursor: pointer;
    z-index: 10;
    transition: all 0.1s ease;
}

.queue-item .remove-btn:hover {
    background: #333;
    transform: scale(1.2);
}


.queue-item .count {
    position: absolute;
    bottom: -5px;
    right: -5px;
    background: var(--coc-orange);
    color: white;
    font-size: 0.75rem;
    font-weight: 900;
    padding: 2px 6px;
    border-radius: 8px;
    border: 2px solid #2a1a0a;
}

.train-btn {
    min-width: 120px;
    background: linear-gradient(180deg, var(--coc-green) 0%, var(--coc-green-dark) 100%);
    border-color: #58d68d;
    border-bottom-color: #145a32;
}

.train-btn:hover {
    background: linear-gradient(180deg, #2ecc71 0%, var(--coc-green) 100%);
}

.train-btn:disabled {
    background: linear-gradient(180deg, #5a5a5a, #3a3a3a);
    border-color: #4a4a4a;
    color: #888;
}

.raid-btn.practice {
    background: linear-gradient(180deg, var(--coc-green) 0%, var(--coc-green-dark) 100%);
    border-color: #58d68d;
    border-bottom-color: #145a32;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
}

.raid-btn.practice:hover {
    background: linear-gradient(180deg, #2ecc71 0%, var(--coc-green) 100%);
    transform: translateY(-2px);
}


/* ============================================
   EDIT PANEL
   ============================================ */

.edit-panel {
    position: fixed;
    right: 2rem;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
    pointer-events: auto;
}

/* Scout/Next panel - right side */
.scout-panel {
    position: fixed;
    right: 2rem;
    top: 50%;
    transform: translateY(-50%);
    padding: 1rem;
    pointer-events: auto;
}

/* Home panel - left side (symmetric to scout-panel) */
.home-panel {
    position: fixed;
    left: 2rem;
    top: 50%;
    transform: translateY(-50%);
    padding: 1rem;
    pointer-events: auto;
}

.edit-btn.delete {
    background: linear-gradient(180deg, var(--coc-red-light), var(--coc-red));
    border-color: #f1948a;
}

.edit-btn.delete:hover {
    background: linear-gradient(180deg, #ff6b5b, var(--coc-red-light));
}

.edit-btn.upgrade {
    background: linear-gradient(180deg, var(--coc-green) 0%, var(--coc-green-dark) 100%);
    border-color: #58d68d;
    border-bottom-color: #145a32;
}

.edit-btn.upgrade:hover {
    background: linear-gradient(180deg, #2ecc71 0%, var(--coc-green) 100%);
}

/* ============================================
   ICONS - Pixel Art Style
   ============================================ */

.icon {
    width: 28px;
    height: 28px;
    display: inline-block;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    filter: drop-shadow(1px 1px 0 #000);
}

.icon.large {
    width: 48px;
    height: 48px;
}

.gold-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><circle cx="4" cy="4" r="3.5" fill="%23f4d03f"/><circle cx="4" cy="4" r="2.5" fill="%23d4a017"/><circle cx="3" cy="3" r="0.8" fill="%23fff5cc"/></svg>');
}

.elixir-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M4 1 L2 3 L2 6 C2 7, 6 7, 6 6 L6 3 Z" fill="%238e44ad"/><ellipse cx="4" cy="3" rx="2" ry="0.8" fill="%23a569bd"/></svg>');
}

.town_hall-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="1" y="3" width="6" height="4" fill="%238b7355"/><rect x="2" y="1" width="4" height="2" fill="%23d4a574"/><circle cx="4" cy="1.5" r="0.8" fill="%23ffd700"/></svg>');
}

.barracks-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="1" y="4" width="6" height="3" fill="%238b2222"/><path d="M1 4 L4 1 L7 4" fill="%233a2a1a"/><rect x="3" y="4" width="2" height="3" fill="%234a3520"/></svg>');
}

.cannon-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><circle cx="4" cy="5" r="2.5" fill="%235d4e37"/><rect x="3" y="2" width="4" height="2" fill="%232a2a2a"/><circle cx="4" cy="5" r="1" fill="%232a2a2a"/></svg>');
}

.wall-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="2" y="1" width="4" height="6" fill="%23888888"/><rect x="3" y="1" width="2" height="6" fill="%23aaaaaa"/></svg>');
}

.mortar-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><ellipse cx="4" cy="5" rx="3" ry="1.5" fill="%235a5a5a"/><circle cx="4" cy="3" r="2" fill="%234a4a4a"/><circle cx="4" cy="3" r="1" fill="%231a1a1a"/></svg>');
}

.tesla-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="3" y="3" width="2" height="4" fill="%234a3a2a"/><circle cx="4" cy="2" r="1.5" fill="%2300ccff"/><circle cx="4" cy="2" r="0.8" fill="%23aaeeff"/></svg>');
}

.mine-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="1" y="4" width="6" height="3" fill="%238b6914"/><rect x="2" y="2" width="4" height="2" fill="%235a4a2a"/><circle cx="3" cy="5" r="0.8" fill="%23ffd700"/><circle cx="5" cy="5.5" r="0.6" fill="%23ffd700"/></svg>');
}

.army_camp-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="1" y="5" width="6" height="2" fill="%23a08060"/><path d="M2 5 L4 2 L6 5" fill="%23c4a484"/><rect x="3" y="4" width="2" height="3" fill="%232a1a0a"/></svg>');
}

.dragons_breath-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="1" y="4" width="6" height="3" fill="%238b0000"/><rect x="2" y="1" width="4" height="3" fill="%23cc0000"/><circle cx="3" cy="2" r="0.5" fill="%23ffd700"/><circle cx="5" cy="2" r="0.5" fill="%23ffd700"/><rect x="2" y="4" width="4" height="1" fill="%23ffd700"/></svg>');
}

.warrior-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><circle cx="4" cy="4" r="2.5" fill="%23f1c40f"/><circle cx="4" cy="3.5" r="2" fill="%23d4a500"/><rect x="5" y="1" width="1" height="5" fill="%23aaa"/><rect x="4" y="3" width="3" height="1" fill="%23666"/></svg>');
}

.archer-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><circle cx="4" cy="4" r="2.5" fill="%2300bcd4"/><circle cx="4" cy="3.5" r="2" fill="%230097a7"/><path d="M5 2 C 6.5 2, 6.5 6, 5 6" fill="none" stroke="%238b4513" stroke-width="0.8"/></svg>');
}

.giant-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><circle cx="4" cy="4" r="3" fill="%23e67e22"/><circle cx="4" cy="3.5" r="2.5" fill="%23d35400"/><rect x="2" y="5" width="4" height="1.5" fill="%235d4e37"/></svg>');
}

.move-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M4 1 L4 7 M1 4 L7 4" stroke="%23fff" stroke-width="1.2"/><path d="M4 1 L3 2 M4 1 L5 2 M4 7 L3 6 M4 7 L5 6 M1 4 L2 3 M1 4 L2 5 M7 4 L6 3 M7 4 L6 5" stroke="%23fff" stroke-width="0.8"/></svg>');
}

.delete-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="2" y="2.5" width="4" height="4.5" rx="0.5" fill="%23e74c3c"/><rect x="1.5" y="1.5" width="5" height="1" rx="0.3" fill="%23c0392b"/><rect x="3" y="1" width="2" height="0.8" fill="%23e74c3c"/></svg>');
}

.cancel-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><circle cx="4" cy="4" r="3" fill="%23c0392b"/><path d="M2.5 2.5 L5.5 5.5 M5.5 2.5 L2.5 5.5" stroke="%23fff" stroke-width="1.2"/></svg>');
}

.upgrade-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><path d="M4 1 L4 7" stroke="%23fff" stroke-width="1.5"/><path d="M4 1 L2 3 M4 1 L6 3" stroke="%23fff" stroke-width="1.5"/></svg>');
}

/* ============================================
   DEPLOYMENT UI
   ============================================ */

.troop-selector {
    display: flex;
    gap: 0.8rem;
    pointer-events: auto;
}

.troop-sel-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: transparent;
    border: 2px solid transparent;
    font-size: 1rem;
    border-radius: 8px;
    padding: 0.5rem 0.8rem;
    transition: all 0.2s ease;
    box-shadow: none;
}

.troop-sel-btn:hover {
    border-color: rgba(244, 208, 63, 0.3);
}

.troop-sel-btn.active {
    background: linear-gradient(180deg, var(--coc-gold) 0%, var(--coc-gold-dark) 100%);
    border-color: var(--coc-gold-light);
    color: #2a1a00;
    box-shadow: 0 0 12px rgba(244, 208, 63, 0.4);
}

.hint {
    font-size: 0.75rem;
    color: var(--text-secondary);
    text-align: center;
    margin: 0;
    text-shadow: 1px 1px 0 #000;
}

/* ============================================
   ANIMATIONS
   ============================================ */

@keyframes flash {
    from {
        opacity: 1;
    }

    to {
        opacity: 0.5;
    }
}

@keyframes glow {

    0%,
    100% {
        box-shadow: 0 0 5px rgba(244, 208, 63, 0.3);
    }

    50% {
        box-shadow: 0 0 15px rgba(244, 208, 63, 0.6);
    }
}

@keyframes bounce {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-3px);
    }
}

/* ============================================
   BATTLE HUD
   ============================================ */

.battle-stats {
    display: flex;
    align-items: center;
    gap: 1rem;
    pointer-events: auto;
}

.destruction-meter {
    display: flex;
    align-items: center;
    gap: 1rem;
    background: var(--panel-bg);
    padding: 0.8rem 1.5rem;
    border: 4px solid var(--panel-border);
    border-radius: 12px;
    box-shadow:
        0 4px 0 var(--panel-border-dark),
        0 6px 12px rgba(0, 0, 0, 0.5);
}

.destruction-bar {
    width: 200px;
    height: 24px;
    background: #1a1a1a;
    border-radius: 12px;
    overflow: hidden;
    border: 3px solid #333;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
}

.destruction-fill {
    height: 100%;
    background: linear-gradient(180deg, #f39c12, #e67e22);
    border-radius: 10px;
    transition: width 0.3s ease;
    box-shadow: 0 0 10px rgba(243, 156, 18, 0.5);
}

.destruction-text {
    font-size: 2rem;
    font-weight: 900;
    color: var(--coc-gold);
    text-shadow: var(--text-shadow);
    min-width: 80px;
    text-align: right;
}

.loot-display {
    display: flex;
    gap: 1rem;
    pointer-events: auto;
}

.loot-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: var(--panel-bg);
    padding: 0.6rem 1rem;
    border: 3px solid var(--panel-border);
    border-radius: 10px;
    box-shadow:
        0 3px 0 var(--panel-border-dark),
        0 4px 8px rgba(0, 0, 0, 0.4);
}

.loot-item span {
    font-size: 1.3rem;
    font-weight: 700;
    text-shadow: 1px 1px 0 #000;
}

.loot-item.gold span {
    color: var(--coc-gold);
}

.loot-item.elixir span {
    color: #a569bd;
}

/* Elixir Collector Icon */
.elixir_collector-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="2" y="5" width="4" height="2" fill="%235a5a5a"/><rect x="2.5" y="2" width="3" height="3" fill="%238e44ad" opacity="0.8"/><circle cx="4" cy="1.5" r="1" fill="%23a569bd"/><rect x="3" y="0" width="2" height="1" fill="%234a4a4a"/></svg>');
}

/* Ballista Icon */
.ballista-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="3" y="2" width="2" height="5" fill="%235d4e37"/><rect x="1" y="3" width="6" height="1.5" fill="%236a4530"/><circle cx="1" cy="3.5" r="0.8" fill="%234a4a4a"/><circle cx="7" cy="3.5" r="0.8" fill="%234a4a4a"/><rect x="4" y="2.5" width="3" height="0.8" fill="%235d4e37"/></svg>');
}

/* X-Bow Icon */
.xbow-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><ellipse cx="4" cy="5" rx="3" ry="1.5" fill="%235a5a5a"/><rect x="2" y="2" width="4" height="2" fill="%234a3520"/><path d="M1 3 L7 3" stroke="%238b4513" stroke-width="1.2"/><circle cx="1" cy="3" r="0.6" fill="%23555"/><circle cx="7" cy="3" r="0.6" fill="%23555"/><rect x="3.5" y="1" width="1" height="4" fill="%236a5a4a"/></svg>');
}

/* Ward Icon */
.ward-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><circle cx="4" cy="4" r="2.5" fill="%232ecc71"/><circle cx="4" cy="3.5" r="2" fill="%231e8449"/><rect x="5" y="1" width="1" height="5" fill="%235d4e37"/><circle cx="5.5" cy="1" r="1" fill="%2388ffcc"/></svg>');
}

/* Recursion Icon - Splitting troop with fractal symbol */
.recursion-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><circle cx="4" cy="4" r="2.5" fill="%2300cc88"/><circle cx="4" cy="3.5" r="2" fill="%23008866"/><circle cx="2.5" cy="5" r="1" fill="%2300aa66" opacity="0.7"/><circle cx="5.5" cy="5" r="1" fill="%2300aa66" opacity="0.7"/><path d="M3 2.5 L4 1.5 L5 2.5" stroke="%23aaffcc" stroke-width="0.5" fill="none"/><path d="M3.5 3 L4 2.5 L4.5 3" stroke="%23ffffff" stroke-width="0.4" fill="none"/></svg>');
}

/* Chrono Swarm Icon - Speed beetle with clock gears */
.chronoswarm-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><ellipse cx="4" cy="4.5" rx="2.5" ry="1.8" fill="%23aa8800"/><ellipse cx="4" cy="4" rx="2" ry="1.5" fill="%23ffcc00"/><circle cx="4" cy="3.5" r="1" fill="%23aa6600"/><line x1="4" y1="3" x2="4" y2="4" stroke="%23ffffff" stroke-width="0.4"/><line x1="4" y1="3.5" x2="4.6" y2="3.8" stroke="%23ffffff" stroke-width="0.3"/><line x1="2" y1="2" x2="1.5" y2="1" stroke="%23ffcc00" stroke-width="0.5"/><line x1="6" y1="2" x2="6.5" y2="1" stroke="%23ffcc00" stroke-width="0.5"/><circle cx="4" cy="3.5" r="0.3" fill="%23ffffff"/></svg>');
}

/* Ram Icon - Battering ram with armored front */
.ram-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><rect x="1" y="3" width="6" height="3" rx="0.5" fill="%238b4513"/><rect x="1.5" y="3.5" width="5" height="2" fill="%23a0522d"/><rect x="0.5" y="3.5" width="1.5" height="2" rx="0.3" fill="%23555555"/><circle cx="1.2" cy="4.5" r="0.6" fill="%23333333"/><circle cx="2.5" cy="5.5" rx="0.8" ry="0.5" fill="%23444444"/><circle cx="5.5" cy="5.5" rx="0.8" ry="0.5" fill="%23444444"/><rect x="0" y="4" width="0.7" height="1" fill="%23777777"/><line x1="0.3" y1="4.2" x2="0.3" y2="4.8" stroke="%23999999" stroke-width="0.3"/></svg>');
}

/* Storm Mage Icon - Blue mage with lightning */
.stormmage-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><circle cx="4" cy="4" r="2.5" fill="%234444ff"/><circle cx="4" cy="3.5" r="2" fill="%232222aa"/><path d="M4 1 L3.5 2.5 L4.3 2.5 L3.8 4 L5 2.2 L4.2 2.2 L4.8 1" fill="%2388ddff"/><path d="M6 2.5 L5.7 3.5 L6.2 3.5 L5.5 5" stroke="%2300ffff" stroke-width="0.4" fill="none"/><circle cx="4" cy="1.5" r="0.3" fill="%23ffffff"/><circle cx="5.8" cy="2.3" r="0.2" fill="%23aaddff"/></svg>');
}

/* Prism Tower Icon - Crystal with light beams */
.prism-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><ellipse cx="4" cy="6" rx="2.5" ry="1" fill="%23444444"/><path d="M4 1 L2 5 L4 6 L6 5 Z" fill="%2388ddff"/><path d="M4 1 L4 6 L6 5 Z" fill="%2366aacc"/><path d="M3.5 2 L4 1 L4.5 2" fill="%23ffffff" opacity="0.8"/><line x1="4" y1="1" x2="1" y2="3" stroke="%2300ffff" stroke-width="0.3" opacity="0.6"/><line x1="4" y1="1" x2="7" y2="3" stroke="%2300ffff" stroke-width="0.3" opacity="0.6"/></svg>');
}

/* Magma Vent Icon - Volcanic eruption */
.magmavent-icon {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><ellipse cx="4" cy="6" rx="2.5" ry="1" fill="%23333333"/><ellipse cx="4" cy="5" rx="2" ry="1.2" fill="%23555555"/><ellipse cx="4" cy="4.5" rx="1.2" ry="0.8" fill="%23ff4400"/><ellipse cx="4" cy="4" rx="0.8" ry="0.5" fill="%23ffaa00"/><circle cx="3" cy="2" r="0.4" fill="%23ff6600" opacity="0.8"/><circle cx="4.5" cy="1.5" r="0.5" fill="%23ff8800" opacity="0.7"/><circle cx="4" cy="2.5" r="0.3" fill="%23ffcc00" opacity="0.9"/></svg>');
}

/* Cloud Overlay - covers all UI during transitions */
.cloud-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000000;
    pointer-events: all;
    background: transparent;
    overflow: hidden;
}

.cloud-part {
    position: absolute;
    background: #ffffff;
    border-radius: 0;
    opacity: 0;
    animation: cloudParticleFade 2.5s ease-in-out forwards;
}

@keyframes cloudParticleFade {
    0% {
        opacity: 0;
        transform: scale(0.5);
    }

    20% {
        opacity: 1;
        transform: scale(1.2);
    }

    80% {
        opacity: 1;
        transform: scale(1.2);
    }

    100% {
        opacity: 0;
        transform: scale(0.5);
    }
}

.hurry {
    background: linear-gradient(180deg, #f1c40f 0%, #e67e22 50%, #d35400 100%) !important;
    border: 3px solid #f39c12 !important;
    border-bottom: 5px solid #a04000 !important;
    border-radius: 8px !important;
    color: white !important;
    font-weight: 900 !important;
    text-shadow: 0 2px 2px rgba(0, 0, 0, 0.5) !important;
    padding: 6px 15px !important;
    margin-right: 15px;
    font-size: 0.85rem !important;
    transition: all 0.1s ease !important;
}

.hurry.disabled {
    filter: grayscale(1) opacity(0.5);
    cursor: not-allowed;
    pointer-events: none;
}

.hurry:hover:not(.disabled) {
    filter: brightness(1.1);
    transform: translateY(-1px);
}

.hurry:active {
    transform: translateY(2px);
    border-bottom-width: 2px !important;
}

.header-actions {
    display: flex;
    align-items: center;
}

.hidden-ui {
    opacity: 0 !important;
    pointer-events: none !important;
    transform: scale(0.98);
}




/* Building Grid Layout */
.building-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 12px;
    padding: 5px;
}

.building-grid-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: linear-gradient(180deg, #3a3020 0%, #2a2015 100%);
    border: 2px solid var(--panel-border);
    border-radius: 8px;
    padding: 10px 5px;
    gap: 5px;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
}

.building-grid-item:hover:not(.disabled) {
    border-color: var(--coc-gold);
    background: linear-gradient(180deg, #4a3e2a 0%, #3a2e1d 100%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.building-grid-item:active:not(.disabled) {
    transform: translateY(1px);
}

.building-grid-item.disabled {
    opacity: 0.5;
    filter: grayscale(0.8);
    cursor: not-allowed;
    border-color: #555;
}

.building-grid-item .icon {
    width: 32px;
    height: 32px;
}

.building-grid-item .name {
    font-size: 0.75rem;
    color: var(--text-primary);
    text-align: center;
    font-weight: 600;
}

.building-grid-item .cost {
    font-size: 0.7rem;
    color: var(--coc-gold);
    font-weight: 700;
}

.grid-btn {
    background: linear-gradient(180deg, var(--coc-green) 0%, var(--coc-green-dark) 100%);
    border: 1px solid #1a5a30;
    border-radius: 4px;
    color: white;
    font-size: 0.65rem;
    font-weight: 700;
    padding: 4px 8px;
    cursor: pointer;
    text-shadow: 1px 1px 0 #000;
}

.grid-btn:hover:not(:disabled) {
    filter: brightness(1.1);
    transform: scale(1.05);
}

.grid-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Animations for Edit Panel */
@keyframes slideInRight {
    0% {
        transform: translateY(-50%) translateX(100px);
        opacity: 0;
    }

    70% {
        transform: translateY(-50%) translateX(-10px);
        opacity: 1;
    }

    100% {
        transform: translateY(-50%) translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    0% {
        transform: translateY(-50%) translateX(0);
        opacity: 1;
    }

    100% {
        transform: translateY(-50%) translateX(100px);
        opacity: 0;
    }
}

.edit-panel {
    animation: slideInRight 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

.edit-panel.exiting {
    animation: slideOutRight 0.15s ease-in forwards;
}

/* ============================================
   INFO PANEL - Left Slide-out
   ============================================ */

.info-panel {
    position: fixed;
    top: 50%;
    left: 0;
    transform: translate(-120%, -50%);
    width: 300px;
    background: var(--panel-bg);
    border: 4px solid var(--panel-border);
    border-left: none;
    border-radius: 0 16px 16px 0;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    box-shadow:
        6px 0 0 var(--panel-border-dark),
        10px 10px 30px rgba(0, 0, 0, 0.6);
    z-index: 100;
    transition: transform 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    pointer-events: auto;
}

.info-panel.open {
    transform: translate(0, -50%);
}

.info-header {
    border-bottom: 2px solid var(--panel-border-dark);
    padding-bottom: 0.8rem;
    margin-bottom: 0.5rem;
}

.info-title-row {
    display: flex;
    align-items: baseline;
    gap: 12px;
}

.info-header h2 {
    margin: 0;
    font-size: 1.5rem;
    color: var(--coc-gold);
    text-transform: uppercase;
    text-shadow: 2px 2px 0 #000;
}

.info-header p {
    margin: 4px 0 0 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-style: italic;
}

.info-stats {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    background: rgba(0, 0, 0, 0.3);
    padding: 1rem;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.stat-row {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    color: #ddd;
}

.stat-label {
    font-weight: 700;
    color: #aaa;
}

.stat-val {
    font-weight: 900;
    color: #fff;
}

.info-actions {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.action-btn-small {
    flex: 1;
    font-size: 0.75rem;
    padding: 0.6rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
}

button:disabled,
.action-btn:disabled,
.action-btn-small:disabled,
.disabled {
    opacity: 0.5 !important;
    filter: grayscale(1) !important;
    cursor: not-allowed !important;
    pointer-events: none !important;
}